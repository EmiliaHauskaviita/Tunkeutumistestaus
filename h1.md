# h1 Kybertappoketju


### x) Lue/katso/kuuntele ja tiivistä. (Tässä x-alakohdassa ei tarvitse tehdä testejä tietokoneella, vain lukeminen tai kuunteleminen ja tiivistelmä riittää. Tiivistämiseen riittää muutama ranskalainen viiva.)
Darknet Diaries (RSS)
- 
Hutchins et al 2011: Intelligence-Driven Computer Network Defense Informed by Analysis of Adversary Campaigns and Intrusion Kill Chains, chapters Abstract, 3.2 Intrusion Kill Chain.
- Kill Chain on systemaattinen prosessi, jonka tarkituksena on kohdistaa ja hyökätä vastustajaan saadaksemme aikaan halutut vaikutukset.
- Prosessin vaiheet on määritelty olemaan: find (etsi), fix (kiinnitä), track (seuraa), target (kohdenna), engage (hyökkää) ja assess (arvioi).
- Kill Chain on prosessina ketju, jossa mikä tahansa puute keskeyttää koko prosessin.
- Intrusion kill chain on suunniteltu erityisesti tunekutumista varten.
- Intrusion kill chain määritellään: tiedustelu, aseistus, toimitus, hyväksikäyttö, asennus, komento ja valvonta, sekä tavoitteiden saavuttaminen.
  
€ Santos et al: The Art of Hacking (Video Collection): 4.3 Surveying Essential Tools for Active Reconnaissance. Sisältää porttiskannauksen. 5 videota, yhteensä noin 20 min.
KKO 2003:36.

### a) Asenna Kali virtuaalikoneeseen. (Jos asennuksessa ei ole mitään ongelmia tai olet asentanut jo aiemmin, tarkkaa raporttia tästä alakohdasta ei tarvita. Kerro silloin kuitenkin, mikä versio ja millä asennustavalla. Jos on ongelmia, niin tarkka ja toistettava raportti).
Minulla ei ennestään ollut ladattu VirtualBoxiin Kalia joten latasin sen käyttäen vagrantia. Aloitin tekemällä uuden kansion komennolla "mkdir kali-vagrant". Kansion luomisen jälkeen siirryin kansioon jossa suoritin komennon "vagrant init kalilinux/rolling --box-version 2025.1.0", jonka löysin osoitteesta https://portal.cloud.hashicorp.com/vagrant/discover/kalilinux/rolling. Seuraavaksi käynnistin virtuaalikoneen komennolla "vagrant up" ja yhdistin siihen komennolla "vagrant ssh".

<img width="698" alt="Näyttökuva 2025-03-31 kello 16 39 07" src="https://github.com/user-attachments/assets/f24dfbb8-8f74-452e-9199-bc1ffe9218e2" />

### b) Irrota Kali-virtuaalikone verkosta. Todista testein, että kone ei saa yhteyttä Internetiin (esim. 'ping 8.8.8.8')
Alla olevassa kuvassa näkyy kuinka irrotin virtuaalikoneen verkosta. Kuvassa on myös "ping 8.8.8.8" testi, josta nähdään ettei kone saa yhteyttä internettiin.

<img width="206" alt="Näyttökuva 2025-03-31 kello 17 25 53" src="https://github.com/user-attachments/assets/f3db868f-03a1-4b67-99f5-821c3162a2b0" />


### c) Porttiskannaa 1000 tavallisinta tcp-porttia omasta koneestasi (nmap -T4 -A localhost). Selitä komennon paramterit. Analysoi ja selitä tulokset.

Komento 'nmap -T4 -A localhost' analysointiin käytin nmap manuaali sivuja komennolla 'man nmap'.
nmap ("Network Mapper") on avoimen lähdekoodin työkalu verkon tutkimiseen. -T4 käytetään nopeampaan suoritukseen. -A käytetään käyttöjärjestelmän ja version tunnistuksen, skriptauksen ja traceroute käyttöön ottamiseen. localhost taas on isäntämme nimi. 

<img width="292" alt="Näyttökuva 2025-03-31 kello 18 02 13" src="https://github.com/user-attachments/assets/734496c6-da33-455b-a399-1be348b6cfc3" />

Tulos komennosta 'nmap -T4 -A local host' näkyy alla olevassa kuvassa. Tuloksesta voidaan huomata ettei nmap pystynyt löytämään DNS-palvelinta ja käänteinen DNS on poistettu käytöstä. Host is up tarkoittaa sitä että localhost on saavutettavissa ja vastasi pyyntöön 0,00016 s viiveellä. Koska käytän vagrantin kautta kalia näkyy, että 999 porttia on suljettu eikä 1000, koska vagrant jättää ssh yhteydelle portin auki. 

<img width="315" alt="Näyttökuva 2025-03-31 kello 17 51 23" src="https://github.com/user-attachments/assets/3370db1a-9825-40b4-9a32-426642b5992f" />

<img width="319" alt="Näyttökuva 2025-03-31 kello 17 51 35" src="https://github.com/user-attachments/assets/f11875d5-4f36-49e5-9de6-11252e8370b0" />


### d) Asenna kaksi vapaavalintaista demonia ja skannaa uudelleen. Analysoi ja selitä erot.
Päätin käyttää tähän tehtävään apache2 ja ssh. Minun tuli ensin avata molemmat demonit komennoilla 'sudo systemctl start apache2' ja 'sudo systemctl start ssh'. Käytin myös komentoja 'sudo systemctl enable apache2' ja 'sudo systemctl enable ssh', joka tekee demonista automaattisesti käynnistyvän järjestelmän. Kun molemmat demonit olivat käynnissä tein uuden skannauksen. Alla olevissa kuvissa näkyy että nyt portteja on kiinni 998, tämä on siksi että openSSH ja Apache HTTP Server molemmat avasivat portteja.

<img width="409" alt="Näyttökuva 2025-03-31 kello 18 42 54" src="https://github.com/user-attachments/assets/65a393fc-2fd8-44ef-aaef-e4ab8dad766c" />

<img width="412" alt="Näyttökuva 2025-03-31 kello 18 43 21" src="https://github.com/user-attachments/assets/01333329-b16e-45cc-a448-1eee789208bc" />


### e) Asenna Metasploitable 2 virtuaalikoneeseen
### f) Tee koneiden välille virtuaaliverkko. Jos säätelet VirtualBoxistaKali saa yhteyden Internettiin, mutta sen voi laittaa pois päältä Kalin ja Metasploitablen välillä on host-only network, niin että porttiskannatessa ym. koneet on eristetty intenetistä, mutta ne saavat yhteyden toisiinsa Vaihtoehtoisesti voit tehdä molempien koneiden asennuksen ja virtuaaliverkon vagrantilla. Silloin molemmat koneet samaan Vagrantfile:n.
### g) Etsi Metasploitable porttiskannaamalla (nmap -sn). Tarkista selaimella, että löysit oikean IP:n - Metasploitablen weppipalvelimen etusivulla lukee Metasploitable.
### h) Porttiskannaa Metasploitable huolellisesti ja kaikki portit (nmap -A -T4 -p-). Poimi 2-3 hyökkääjälle kiinnostavinta porttia. Analysoi ja selitä tulokset näiden porttien osalta.

## Lähteet:
https://www.kali.org/docs/virtualization/install-vagrant-guest-vm/

https://portal.cloud.hashicorp.com/vagrant/discover/kalilinux/rolling

nmap manuaalisivut 

https://www.kali.org/get-kali/#kali-virtual-machines

https://terokarvinen.com/tunkeutumistestaus/

https://tuomasvalkamo.com/PenTestCourse/week-2/

https://lockheedmartin.com/content/dam/lockheed-martin/rms/documents/cyber/LM-White-Paper-Intel-Driven-Defense.pdf

https://sourceforge.net/projects/metasploitable/
